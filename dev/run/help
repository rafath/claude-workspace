#!/bin/bash

# Displays available commands in dev/run/ by reading ### comments from each file.
# Files without a ### comment are skipped.

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

echo ""
echo "Available commands in dev/run/"
echo "──────────────────────────────────────────────────────────"
echo ""

for file in "$SCRIPT_DIR"/*; do
    [[ -f "$file" ]] || continue

    # Extract ### comment line (first occurrence)
    desc=$(grep -m1 "^### " "$file" 2>/dev/null | sed 's/^### //')

    # Skip files without ### comment
    [[ -z "$desc" ]] && continue

    name=$(basename "$file")
    printf "  %-24s %s\n" "$name" "$desc"
done

echo ""
